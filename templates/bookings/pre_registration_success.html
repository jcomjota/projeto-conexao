{% extends 'base.html' %}
{% load static %}

{% block title %}Pré-inscrição Enviada - {{ pre_registration.event.adventure.title }}{% endblock %}

{% block extra_css %}
<style>
    .success-container {
        max-width: 600px;
        margin: 2rem auto;
        padding: 2rem;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        text-align: center;
    }
    
    .success-icon {
        font-size: 4rem;
        color: var(--secondary-color);
        margin-bottom: 1rem;
    }
    
    .success-title {
        color: var(--secondary-color);
        margin-bottom: 1rem;
        font-size: 2rem;
    }
    
    .event-details {
        background: var(--gradient-bg);
        color: white;
        padding: 1.5rem;
        border-radius: 10px;
        margin: 2rem 0;
    }
    
    .next-steps {
        background: #f8f9fa;
        padding: 1.5rem;
        border-radius: 10px;
        margin: 2rem 0;
        border-left: 4px solid var(--primary-color);
        text-align: left;
    }
    
    .next-steps h3 {
        color: var(--primary-color);
        margin-bottom: 1rem;
    }
    
    .step {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        padding: 0.75rem;
        background: white;
        border-radius: 8px;
        border: 1px solid #e9ecef;
    }
    
    .step-number {
        background: var(--primary-color);
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 1rem;
        flex-shrink: 0;
    }
    
    .whatsapp-info {
        background: #25d366;
        color: white;
        padding: 1rem;
        border-radius: 10px;
        margin: 1rem 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }
    
    .contact-info {
        background: #e8f5e8;
        padding: 1.5rem;
        border-radius: 10px;
        margin: 2rem 0;
        border-left: 4px solid var(--secondary-color);
    }
    
    .contact-info h3 {
        color: var(--secondary-color);
        margin-bottom: 1rem;
    }
    
    .contact-item {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
    }
    
    .contact-item i {
        color: var(--secondary-color);
        margin-right: 0.5rem;
        width: 20px;
    }
    
    .btn-whatsapp {
        background: #25d366;
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 10px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        transition: transform 0.2s;
        margin: 1rem 0.5rem;
    }
    
    .btn-whatsapp:hover {
        transform: translateY(-2px);
        color: white;
        text-decoration: none;
    }
    
    .btn-home {
        background: var(--gradient-bg);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 10px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        transition: transform 0.2s;
        margin: 1rem 0.5rem;
    }
    
    .btn-home:hover {
        transform: translateY(-2px);
        color: white;
        text-decoration: none;
    }
    
    .registration-data {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        text-align: left;
    }
    
    .registration-data h4 {
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }
    
    .registration-data p {
        margin: 0.25rem 0;
        font-size: 0.9rem;
    }
    
    @media (max-width: 768px) {
        .success-container {
            margin: 1rem;
            padding: 1.5rem;
        }
        
        .success-title {
            font-size: 1.5rem;
        }
        
        .btn-whatsapp,
        .btn-home {
            display: block;
            width: 100%;
            text-align: center;
            margin: 0.5rem 0;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="success-icon">
        <i class="fas fa-check-circle"></i>
    </div>
    
    <h1 class="success-title">Pré-inscrição Enviada!</h1>
    
    <p class="lead">Obrigado, <strong>{{ pre_registration.get_full_name }}</strong>! Sua pré-inscrição foi recebida com sucesso.</p>
    
    <div class="event-details">
        <h3>{{ pre_registration.event.adventure.title }}</h3>
        <p><i class="fas fa-calendar-alt"></i> {{ pre_registration.event.date|date:"d/m/Y" }}</p>
        <p><i class="fas fa-clock"></i> {{ pre_registration.event.start_time|time:"H:i" }}</p>
        <p><i class="fas fa-dollar-sign"></i> R$ {{ pre_registration.event.final_price }}</p>
    </div>
    
    <div class="whatsapp-info">
        <i class="fab fa-whatsapp"></i>
        <span>Uma mensagem de confirmação foi enviada para seu WhatsApp!</span>
    </div>
    
    <div class="next-steps">
        <h3><i class="fas fa-list-check"></i> Próximos Passos</h3>
        
        <div class="step">
            <div class="step-number">1</div>
            <div>
                <strong>Confirmação por WhatsApp</strong><br>
                Você receberá uma mensagem em seu WhatsApp confirmando o recebimento da pré-inscrição.
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">2</div>
            <div>
                <strong>Análise da Equipe</strong><br>
                Nossa equipe analisará sua pré-inscrição e verificará a disponibilidade de vagas.
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">3</div>
            <div>
                <strong>Aprovação</strong><br>
                Você será contatado em até 24 horas com a aprovação de sua inscrição.
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">4</div>
            <div>
                <strong>Pagamento</strong><br>
                Após a aprovação, você receberá as instruções para pagamento e garantir sua vaga.
            </div>
        </div>
    </div>
    
    <div class="registration-data">
        <h4>Dados da Pré-inscrição</h4>
        <p><strong>Nome:</strong> {{ pre_registration.get_full_name }}</p>
        <p><strong>E-mail:</strong> {{ pre_registration.email }}</p>
        <p><strong>Telefone:</strong> {{ pre_registration.phone }}</p>
        <p><strong>CPF:</strong> {{ pre_registration.cpf }}</p>
        <p><strong>Data da Pré-inscrição:</strong> {{ pre_registration.created_at|date:"d/m/Y às H:i" }}</p>
        <p><strong>Status:</strong> <span style="color: orange;">Aguardando Análise</span></p>
    </div>
    
    <div class="contact-info">
        <h3><i class="fas fa-phone"></i> Precisa de Ajuda?</h3>
        <p>Se tiver alguma dúvida ou precisar de mais informações, entre em contato conosco:</p>
        
        <div class="contact-item">
            <i class="fab fa-whatsapp"></i>
            <span>WhatsApp: (54) 99321-6261</span>
        </div>
        
        <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>E-mail: contato@conexaoadventure.com</span>
        </div>
        
        <div class="contact-item">
            <i class="fas fa-clock"></i>
            <span>Horário de Atendimento: 8h às 18h</span>
        </div>
    </div>
    
    <div class="text-center">
        <a href="https://wa.me/5554993216261?text=Olá! Acabei de fazer uma pré-inscrição para {{ pre_registration.event.adventure.title }} em {{ pre_registration.event.date|date:"d/m/Y" }}. Gostaria de mais informações." 
           class="btn-whatsapp" 
           target="_blank">
            <i class="fab fa-whatsapp"></i>
            Falar no WhatsApp
        </a>
        
        <a href="/" class="btn-home">
            <i class="fas fa-home"></i>
            Voltar ao Início
        </a>
    </div>
    
    <div style="margin-top: 2rem; padding: 1rem; background: #fff3cd; border-radius: 8px; border: 1px solid #ffeaa7;">
        <small>
            <i class="fas fa-info-circle"></i>
            <strong>Importante:</strong> Sua vaga só será garantida após a aprovação da pré-inscrição e confirmação do pagamento. 
            Recomendamos não fazer outros compromissos para essa data até receber a confirmação.
        </small>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animar os steps
    const steps = document.querySelectorAll('.step');
    steps.forEach((step, index) => {
        setTimeout(() => {
            step.style.opacity = '0';
            step.style.transform = 'translateX(-20px)';
            step.style.transition = 'all 0.5s ease';
            
            setTimeout(() => {
                step.style.opacity = '1';
                step.style.transform = 'translateX(0)';
            }, 100);
        }, index * 200);
    });
    
    // Confetti effect (opcional)
    function createConfetti() {
        const colors = ['#229c43', '#fe7d26', '#ffffff'];
        const confettiCount = 50;
        
        for (let i = 0; i < confettiCount; i++) {
            const confetti = document.createElement('div');
            confetti.style.position = 'fixed';
            confetti.style.width = '10px';
            confetti.style.height = '10px';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-10px';
            confetti.style.zIndex = '9999';
            confetti.style.pointerEvents = 'none';
            confetti.style.borderRadius = '50%';
            
            document.body.appendChild(confetti);
            
            const animation = confetti.animate([
                { transform: 'translateY(-10px) rotate(0deg)', opacity: 1 },
                { transform: `translateY(${window.innerHeight + 10}px) rotate(360deg)`, opacity: 0 }
            ], {
                duration: Math.random() * 2000 + 1000,
                easing: 'ease-in'
            });
            
            animation.onfinish = () => {
                confetti.remove();
            };
        }
    }
    
    // Executar confetti após um breve delay
    setTimeout(createConfetti, 500);
});
</script>
{% endblock %} 